{"openapi":"3.1.0","info":{"title":"Loan Management System API","description":"API documentation for Loan Management System (Finprov)","contact":{"name":"Finprov Team","email":"support@finprov.com"},"version":"1.0"},"servers":[{"url":"http://localhost:8081","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Menu Management","description":"Endpoints for managing menus"},{"name":"Plafond","description":"Endpoints for loan plafond information"},{"name":"Loan Management","description":"Endpoints for loan submission, approval, and disbursement"},{"name":"Permission Management","description":"Endpoints for managing permissions"},{"name":"Role Management","description":"Endpoints for managing roles"},{"name":"Role Mapping Management","description":"Endpoints for managing role-permission and role-menu mappings"},{"name":"Authentication","description":"Endpoints for user authentication"},{"name":"OpenAI","description":"Endpoints for AI chat features"},{"name":"Customer Management","description":"Endpoints for managing customers"},{"name":"User Management","description":"Endpoints for managing users"},{"name":"Public","description":"Public endpoints"}],"paths":{"/api/roles/{id}":{"put":{"tags":["Role Management"],"summary":"Update Role","description":"Update an existing role (SUPER_ADMIN)","operationId":"updateRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Role"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRole"}}}}}},"delete":{"tags":["Role Management"],"summary":"Delete Role","description":"Soft delete a role (SUPER_ADMIN)","operationId":"deleteRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/roles/{id}/restore":{"put":{"tags":["Role Management"],"summary":"Restore Role","description":"Restore a deleted role (SUPER_ADMIN)","operationId":"restoreRole","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRole"}}}}}}},"/api/permissions/{id}":{"put":{"tags":["Permission Management"],"summary":"Update Permission","description":"Update a permission (SUPER_ADMIN)","operationId":"update","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Permission"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponsePermission"}}}}}},"delete":{"tags":["Permission Management"],"summary":"Delete Permission","description":"Delete a permission (SUPER_ADMIN)","operationId":"delete","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/menus/{id}":{"put":{"tags":["Menu Management"],"summary":"Update Menu","description":"Update an existing menu (SUPER_ADMIN)","operationId":"update_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Menu"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseMenu"}}}}}},"delete":{"tags":["Menu Management"],"summary":"Delete Menu","description":"Delete a menu (SUPER_ADMIN)","operationId":"delete_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/users":{"get":{"tags":["User Management"],"summary":"List Users","description":"Get all users (SUPER_ADMIN)","operationId":"getAllUsers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListUserDto"}}}}}},"post":{"tags":["User Management"],"summary":"Create User","description":"Create a new user (SUPER_ADMIN)","operationId":"createUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseUser"}}}}}}},"/api/roles":{"get":{"tags":["Role Management"],"summary":"List Roles","description":"Get all roles (SUPER_ADMIN)","operationId":"getAllRoles","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListRole"}}}}}},"post":{"tags":["Role Management"],"summary":"Create Role","description":"Create a new role (SUPER_ADMIN)","operationId":"createRole","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Role"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRole"}}}}}}},"/api/role-mappings/roles/{roleId}/permissions/{permissionId}":{"post":{"tags":["Role Mapping Management"],"summary":"Add Permission to Role","description":"Map a permission to a role (SUPER_ADMIN)","operationId":"addPermission","parameters":[{"name":"roleId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"permissionId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/role-mappings/roles/{roleId}/menus/{menuId}":{"post":{"tags":["Role Mapping Management"],"summary":"Add Menu to Role","description":"Map a menu to a role (SUPER_ADMIN)","operationId":"addMenu","parameters":[{"name":"roleId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"menuId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/permissions":{"get":{"tags":["Permission Management"],"summary":"List Permissions","description":"Get all permissions (SUPER_ADMIN)","operationId":"list","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListPermission"}}}}}},"post":{"tags":["Permission Management"],"summary":"Create Permission","description":"Create a new permission (SUPER_ADMIN)","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Permission"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponsePermission"}}}}}}},"/api/openai/chat":{"post":{"tags":["OpenAI"],"summary":"Chat with AI","description":"Send a prompt to OpenAI and get a response (SUPER_ADMIN)","operationId":"chat","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OpenAIChatRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseOpenAIChatResponse"}}}}}}},"/api/menus":{"get":{"tags":["Menu Management"],"summary":"List Menus","description":"Get all menus (SUPER_ADMIN)","operationId":"list_1","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListMenu"}}}}}},"post":{"tags":["Menu Management"],"summary":"Create Menu","description":"Create a new menu (SUPER_ADMIN)","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Menu"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseMenu"}}}}}}},"/api/loans":{"get":{"tags":["Loan Management"],"summary":"List Loans","description":"Get all loans","operationId":"list_2","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListLoan"}}}}}},"post":{"tags":["Loan Management"],"summary":"Submit Loan","description":"Submit a new loan application (NASABAH)","operationId":"submit","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubmitLoanRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoan"}}}}}}},"/api/customers":{"get":{"tags":["Customer Management"],"summary":"List Customers","description":"Get all customers (SUPER_ADMIN)","operationId":"getAllCustomers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListCustomer"}}}}}},"post":{"tags":["Customer Management"],"summary":"Create Customer","description":"Create a new customer (SUPER_ADMIN)","operationId":"createCustomer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseCustomer"}}}}}}},"/api/auth/reset-password":{"post":{"tags":["Authentication"],"summary":"Reset password","description":"Resets user password","operationId":"resetPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/auth/register":{"post":{"tags":["Authentication"],"summary":"Register user","description":"Registers a new user (default role: NASABAH)","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseRegisterResponse"}}}}}}},"/api/auth/logout":{"post":{"tags":["Authentication"],"summary":"Logout user","description":"Logs out the current user","operationId":"logout","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/auth/login":{"post":{"tags":["Authentication"],"summary":"Login user","description":"Authenticates a user and returns a JWT token","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoginResponse"}}}}}}},"/api/loans/{id}/review":{"patch":{"tags":["Loan Management"],"summary":"Review Loan","description":"Review a loan application (MARKETING)","operationId":"review","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionRequest"}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoan"}}}}}}},"/api/loans/{id}/disburse":{"patch":{"tags":["Loan Management"],"summary":"Disburse Loan","description":"Disburse a loan (BACK_OFFICE)","operationId":"disburse","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionRequest"}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoan"}}}}}}},"/api/loans/{id}/approve":{"patch":{"tags":["Loan Management"],"summary":"Approve Loan","description":"Approve a loan application (BRANCH_MANAGER)","operationId":"approve","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransitionRequest"}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoan"}}}}}}},"/api/public/landing":{"get":{"tags":["Public"],"summary":"Landing Page","description":"Get public landing page info","operationId":"landing","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseMapStringObject"}}}}}}},"/api/plafonds":{"get":{"tags":["Plafond"],"summary":"List Plafonds","description":"Get list of available loan plafonds (Public)","operationId":"list_3","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseListPlafond"}}}}}}},"/api/loans/{id}":{"get":{"tags":["Loan Management"],"summary":"Get Loan Detail","description":"Get details of a specific loan","operationId":"detail","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseLoan"}}}}}}},"/api/users/{id}":{"delete":{"tags":["User Management"],"summary":"Delete User","description":"Soft delete a user (SUPER_ADMIN)","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/role-mappings/role-permissions/{id}":{"delete":{"tags":["Role Mapping Management"],"summary":"Remove Permission from Role","description":"Unmap a permission from a role (SUPER_ADMIN)","operationId":"removePermission","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/role-mappings/role-menus/{id}":{"delete":{"tags":["Role Mapping Management"],"summary":"Remove Menu from Role","description":"Unmap a menu from a role (SUPER_ADMIN)","operationId":"removeMenu","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}},"/api/customers/{id}":{"delete":{"tags":["Customer Management"],"summary":"Delete Customer","description":"Soft delete a customer (SUPER_ADMIN)","operationId":"deleteCustomer","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseObject"}}}}}}}},"components":{"schemas":{"Role":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"deleted":{"type":"boolean"}}},"ApiResponseRole":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Role"},"timestamp":{"type":"string"}}},"Permission":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"code":{"type":"string"},"name":{"type":"string"}}},"ApiResponsePermission":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Permission"},"timestamp":{"type":"string"}}},"Menu":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"code":{"type":"string"},"name":{"type":"string"},"path":{"type":"string"}}},"ApiResponseMenu":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Menu"},"timestamp":{"type":"string"}}},"User":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"isActive":{"type":"boolean"},"deleted":{"type":"boolean"}}},"ApiResponseUser":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/User"},"timestamp":{"type":"string"}}},"ApiResponseObject":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object"},"timestamp":{"type":"string"}}},"OpenAIChatRequest":{"type":"object","properties":{"prompt":{"type":"string"},"model":{"type":"string"},"temperature":{"type":"number","format":"double"}}},"ApiResponseOpenAIChatResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/OpenAIChatResponse"},"timestamp":{"type":"string"}}},"OpenAIChatResponse":{"type":"object","properties":{"content":{"type":"string"}}},"SubmitLoanRequest":{"type":"object","properties":{"plafondId":{"type":"integer","format":"int64"},"amount":{"type":"number"}}},"ApiResponseLoan":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Loan"},"timestamp":{"type":"string"}}},"Loan":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"applicant":{"$ref":"#/components/schemas/User"},"plafond":{"$ref":"#/components/schemas/Plafond"},"amount":{"type":"number"},"currentStatus":{"type":"string","enum":["DRAFT","SUBMITTED","REVIEWED","APPROVED","DISBURSED"]},"createdAt":{"type":"string","format":"date-time"}}},"Plafond":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"code":{"type":"string"},"name":{"type":"string"},"maxAmount":{"type":"number"}}},"Customer":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"firstName":{"type":"string"},"lastName":{"type":"string"},"nik":{"type":"string"},"phoneNumber":{"type":"string"},"deleted":{"type":"boolean"}}},"ApiResponseCustomer":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/Customer"},"timestamp":{"type":"string"}}},"ResetPasswordRequest":{"type":"object","properties":{"username":{"type":"string"},"newPassword":{"type":"string"}}},"RegisterRequest":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}},"ApiResponseRegisterResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/RegisterResponse"},"timestamp":{"type":"string"}}},"RegisterResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}}},"LoginRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"ApiResponseLoginResponse":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/LoginResponse"},"timestamp":{"type":"string"}}},"LoginResponse":{"type":"object","properties":{"token":{"type":"string"},"username":{"type":"string"},"userId":{"type":"integer","format":"int64"},"role":{"type":"string"},"roles":{"type":"array","items":{"type":"string"}}}},"TransitionRequest":{"type":"object","properties":{"remarks":{"type":"string"},"amount":{"type":"number"}}},"ApiResponseListUserDto":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}},"timestamp":{"type":"string"}}},"UserDto":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"username":{"type":"string"},"email":{"type":"string"},"isActive":{"type":"boolean"}}},"ApiResponseListRole":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Role"}},"timestamp":{"type":"string"}}},"ApiResponseMapStringObject":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","additionalProperties":{"type":"object"}},"timestamp":{"type":"string"}}},"ApiResponseListPlafond":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Plafond"}},"timestamp":{"type":"string"}}},"ApiResponseListPermission":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Permission"}},"timestamp":{"type":"string"}}},"ApiResponseListMenu":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Menu"}},"timestamp":{"type":"string"}}},"ApiResponseListLoan":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Loan"}},"timestamp":{"type":"string"}}},"ApiResponseListCustomer":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}},"timestamp":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}